(()=>{"use strict";document.addEventListener("DOMContentLoaded",(function(){var t,e,n=document.getElementById("latitud"),o=document.getElementById("longitud");document.getElementById("enviarBtn").addEventListener("click",(async()=>{const t={latitud:n.value,longitud:o.value};try{await async function(t){const e=sessionStorage.getItem("token");try{const n=await fetch("http://127.0.0.1:8000/api/lotes",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e},body:JSON.stringify(t)});if(422==n.status){const t=await n.json(),e=document.createElement("div");e.classList.add("alert","alert-danger","mt-3"),e.textContent=t.errores;const o=document.querySelector(".form-group");o.insertBefore(e,o.firstChild),setTimeout((()=>{e.remove()}),1500)}else{const t=document.createElement("div");t.classList.add("alert","alert-success","mt-3"),t.textContent="Lote entregado con éxito.";const e=document.querySelector(".form-group");e.insertBefore(t,e.firstChild),setTimeout((()=>{t.remove()}),1500)}}catch(t){}}(t)}catch(t){console.error("Error al añadir el lote",t)}})),t={lat:38.693082781209704,lng:-4.108655534417066},e=new google.maps.Map(document.getElementById("map"),{zoom:10,center:new google.maps.LatLng(t.lat,t.lng)}),new google.maps.Marker({map:e,draggable:!0,position:new google.maps.LatLng(t.lat,t.lng)}).addListener("dragend",(function(){document.getElementById("latitud").value=this.getPosition().lat(),document.getElementById("longitud").value=this.getPosition().lng()}))}))})();